<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Quadro de Tarefas</title>
  <link rel="shortcut icon" href="assets/icon/favicon.png" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="css/trello.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

  <body class="bodyHome">
    <header>
        <nav class="navbar">
            <img src="assets/icon/logo_sem_fundo.png" alt="Logo" class="logo" />
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="metas.html">Metas</a></li>
                <li><a href="historia.html">História</a></li>
                <li><a href="calculadora.html">Calculadora</a></li>
                <li><a href="login.html"><i class="fa-solid fa-circle-user"></i></a></li>
            </ul>
        </nav>
    </header>

  <h1 id="title-tarefa">Quadro de Tarefas</h1>

  <div class="area-adicionar-tarefa">
    <input type="text" id="campo_tarefa" placeholder="Digite a tarefa...">
    <button onclick="adicionarTarefa()">Adicionar</button>
  </div>

  <!-- Colunas do quadro estilo Kanban -->
  <div class="quadro">

    <!-- Coluna 1: A Fazer -->
    <div class="coluna" ondragover="permitirSoltar(event)" ondrop="soltarTarefa(event)">
      <h2>O que quero aprender</h2>
      <div id="coluna_afazer" class="lista-tarefas"></div>
    </div>

    <!-- Coluna 2: Em Andamento -->
    <div class="coluna" ondragover="permitirSoltar(event)" ondrop="soltarTarefa(event)">
      <h2>Estou aprendendo</h2>
      <div id="coluna_andamento" class="lista-tarefas"></div>
    </div>

    <!-- Coluna 3: Concluído -->
    <div class="coluna" ondragover="permitirSoltar(event)" ondrop="soltarTarefa(event)">
      <h2>Aprendi</h2>
      <div id="coluna_concluido" class="lista-tarefas"></div>
    </div>

  </div>

   <h1 id="progresso">Acompanhe o seu progresso</h1>
  <!-- Barra de progresso -->
  <div class="container-progresso">
    <div id="barra_progresso" class="barra"></div>
  </div>
  <p id="texto_progresso" style="text-align: center;">0/0 concluídas</p>

<!-- Gráfico -->
 <h1 id="progresso">Progresso nos mêses</h1>
<div class="grafico-container">
  <canvas id="myChart" width="400" height="210"></canvas>
</div>

    <footer>
        <div class="footer-content">
            <img src="assets/icon/logo_sem_fundo.png" alt="">
            <div class="footer-texto">
                <label> © 2025 FeMusic Todos os direitos reservados.
                    Desenvolvido por Felipe Marcos Bastos Pena</label>
            </div>

        </div>
    </footer>

</body>

</html>

<script>
  // Variável global que armazena a tarefa que está sendo arrastada
  var tarefaSendoArrastada = null;

  // Função para adicionar nova tarefa
  function adicionarTarefa() {
    var campoTexto = document.getElementById('campo_tarefa'); // campo de input
    var textoDigitado = campoTexto.value.trim(); // remove espaços extras

    // Não faz nada se estiver vazio
    if (textoDigitado === '') return;

    // Cria uma nova tarefa
    var novaTarefa = document.createElement('div');
    novaTarefa.className = 'tarefa';         // classe para estilização
    novaTarefa.draggable = true;             // torna a tarefa arrastável
    novaTarefa.textContent = textoDigitado;  // define o texto visível

    // Botão para excluir a tarefa
    var botaoExcluir = document.createElement('button');
    botaoExcluir.textContent = '✖';
    botaoExcluir.className = 'botao-excluir';

    botaoExcluir.onclick = function () {
      novaTarefa.remove();        // remove a tarefa do DOM
      atualizarProgresso();       // atualiza a barra de progresso
    };

    novaTarefa.appendChild(botaoExcluir); // insere o botão na tarefa

    // Eventos de arrastar
    novaTarefa.addEventListener('dragstart', function () {
      tarefaSendoArrastada = novaTarefa;
    });

    novaTarefa.addEventListener('dragend', function () {
      tarefaSendoArrastada = null;
    });

    // Adiciona a nova tarefa à coluna "A Fazer"
    document.getElementById('coluna_afazer').appendChild(novaTarefa);

    // Limpa o campo de texto
    campoTexto.value = '';

    // Atualiza a barra de progresso
    atualizarProgresso();
  }

  // Permite que um item seja solto dentro de uma coluna
  function permitirSoltar(evento) {
    evento.preventDefault();
  }

  // Quando uma tarefa é solta em uma nova coluna
  function soltarTarefa(evento) {
    evento.preventDefault();
    if (tarefaSendoArrastada) {
      evento.target.closest('.lista-tarefas').appendChild(tarefaSendoArrastada);
      atualizarProgresso();
    }
  }

  // Atualiza a barra de progresso com base nas tarefas concluídas
  function atualizarProgresso() {
    var totalTarefas = document.querySelectorAll('.tarefa').length;
    var tarefasConcluidas = document.querySelectorAll('#coluna_concluido .tarefa').length;
    var porcentagem = totalTarefas > 0 ? (tarefasConcluidas / totalTarefas) * 100 : 0;

    // Atualiza a barra e o texto
    document.getElementById('barra_progresso').style.width = porcentagem + '%';
    document.getElementById('texto_progresso').textContent = `${tarefasConcluidas}/${totalTarefas} concluídas`;
  }

  // Gráfico
  const ctx = document.getElementById('myChart');

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: [
        'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
        'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
      ],
      datasets: [{
        label: 'Músicas aprendidas',
        data: [2, 4, 3, 5, 6, 4, 3, 2, 5, 6, 9.5, 4],
        backgroundColor: '#DAA520',  // Dourado
        borderColor: '#000',
        borderWidth: 2
      }]
    },
    options: {
      plugins: {
        legend: {
          labels: {
            color: 'white', // Cor da legenda
            font: {
              size: 15
            }
          }
        }
      },
      scales: {
        x: {
          ticks: {
            color: 'white', // cor dos meses
            font: {
              size: 15
            }
          },
          grid: {
            color: 'white' // linhas de grade leves
          }
        },
        y: {
          beginAtZero: true,
          ticks: {
            color: 'white', // cor dos números laterais
            font: {
              size: 15
            }
          },
          grid: {
            color: 'white'
          }
        }
      }
    }
  });
</script>